# ระบบขายอุปกรณ์คอมพิวเตอร์ออนไลน์ (Online Computer Shop System)

## จัดทำโดย

- นายชนินทร์ ธัญสิริพัฒนธาดา 653380125-2
    
- นายนพรุจ อินพิกุล 653380132-5
    
- นายปวีณวัฒน์ สุขร่วม 653380136-7
    
- นายภูมิพิพัฒน์ มะลิมาตร์ 653380277-9
    
- นายภูริ วงษ์บุญ 653380278-7
    

## อาจารย์ที่ปรึกษา

**รศ.ดร.ปัญญาพล หอระตะ**

---

รายงานนี้เป็นส่วนหนึ่งของการศึกษาวิชา

**CP353002 หลักการออกแบบพัฒนาซอฟต์แวร์**  
**ภาคเรียน 1 ปีการศึกษา 2567**

**ภาควิชาวิทยาการคอมพิวเตอร์**  
วิทยาลัยการคอมพิวเตอร์  
มหาวิทยาลัยขอนแก่น

---
# เอกสารและ Project ที่เกี่ยวข้อง

- **[เอกสารประกอบ แสดง UI](https://drive.google.com/file/d/1m7j29N3fYfIUwgqnI5ZWXauAB3YTs5XB/view?usp=sharing)**  
- **[เว็ปหน้าร้านระบบขายอุปกรณ์คอมพิวเตอร์ออนไลน์](https://github.com/Chanin-Thunsiripattanatada/EcommerceWebsite_OnlineComputerShop_ReactRedux_SoftwareDesign)**  
- **[เว็ปแอดมินระบบขายอุปกรณ์คอมพิวเตอร์ออนไลน์](https://github.com/Chanin-Thunsiripattanatada/AdminSystem_OnlineComputerShop_ReactRedux_SoftwareDesign)**  
---
ระบบนี้เป็น **ระบบขายอุปกรณ์คอมพิวเตอร์ออนไลน์** ที่ช่วยจัดการข้อมูลสำคัญ เช่น การขายสินค้า การสั่งซื้อ รายการสินค้า และข้อมูลลูกค้า โดยรองรับการอัปโหลดหลักฐานการชำระเงินผ่านการโอนเงิน ระบบมีการกำหนดสิทธิ์การเข้าถึงข้อมูลลูกค้าอย่างปลอดภัยด้วย **Bearer Token** ซึ่งใช้ข้อมูลของผู้ใช้งาน (User) เพื่อตรวจสอบบทบาท (**Role**) และมีการใช้ **Principal** ใน **Java Spring Boot** สำหรับการ Query ข้อมูล เพื่อป้องกันการเข้าถึงข้อมูลส่วนตัวของลูกค้าโดยไม่ได้รับอนุญาต


## Use Case Text

| ผู้ใช้ | Use Case (กรณีการใช้งาน) | คำอธิบาย |
| --- | --- | --- |
| ผู้ใช้ทั่วไป | ดูข้อมูลสินค้า | ผู้ใช้ทั่วไปและลูกค้าสามารถเข้าถึงข้อมูลสินค้าในระบบได้ |
| ลูกค้า | ลงทะเบียน | ลูกค้าทำการสร้างบัญชีใหม่ในระบบโดยกรอกข้อมูลส่วนตัว |
| ลูกค้า,ผู้ดูแลระบบ/พนักงาน | เข้าสู่ระบบ | สามารถเข้าสู่ระบบด้วยชื่อบัญชีและรหัสผ่านเพื่อซื้อสินค้า สำหรับลูกค้า และผู้ดูแลระบบสามารถเข้าสู่ระบบเพื่อจัดการข้อมูลได้ |
| ลูกค้า | อัปเดตข้อมูลลูกค้า | ลูกค้าที่ลงทะเบียนแล้วสามารถอัปเดตข้อมูลส่วนตัวภายในระบบได้ |
| ลูกค้า | สร้างคำสั่งซื้อ | ลูกค้าสามารถทำการสร้างคำสั่งซื้อโดยเลือกสินค้าที่ต้องการและดำเนินการเช็คเอาท์ |
| ลูกค้า | ยืนยันคำสั่งซื้อด้วยสลิปโอนเงิน | หลังจากสั่งซื้อ ลูกค้าสามารถอัปโหลดสลิปโอนเงินเพื่อยืนยันคำสั่งซื้อ |
| ผู้ดูแลระบบ/พนักงาน | จัดการข้อมูลสินค้า | ผู้ดูแลระบบหรือพนักงานสามารถเพิ่ม ลบ หรือแก้ไขข้อมูลสินค้าที่มีอยู่ในระบบได้ |
| ผู้ดูแลระบบ/พนักงาน | จัดการข้อมูลคำสั่งซื้อ | ผู้ดูแลระบบหรือพนักงานสามารถตรวจสอบสลิปโอนเงินและอัปเดตสถานะการสั่งซื้อ รวมถึงการจัดการการจัดส่งสินค้า |
| ผู้ดูแลระบบ/พนักงาน | ดูข้อมูลลูกค้า | ผู้ดูแลระบบหรือพนักงานสามารถดูข้อมูลของลูกค้าทั้งหมดในระบบได้ |
| ลูกค้า | เรียกดูสถานะคำสั่งซื้อ | หลังจากยืนยันคำสั่งซื้อ ลูกค้าสามารถดูสถานะคำสั่งซื้อของตัวเองได้ |

# เอกสารระบบ API ของระบบขายอุปกรณ์คอมพิวเตอร์ออนไลน์

เอกสารนี้เป็นคู่มือสำหรับ **ระบบ API ของระบบขายอุปกรณ์คอมพิวเตอร์ออนไลน์** ซึ่งรองรับการจัดการผู้ใช้งาน สินค้า คำสั่งซื้อ และหมวดหมู่สินค้า โดยระบบมีการควบคุมการเข้าถึงข้อมูลด้วยสิทธิ์ที่กำหนดตามบทบาท (Role-Based Authorization) ผ่าน Bearer Token และพัฒนาด้วย **Java Spring Boot**

---

## สารบัญ
- [Endpoints สำหรับการยืนยันตัวตน (Authentication)](#endpoints-สำหรับการยืนยันตัวตน-authentication)
- [Endpoints สาธารณะ (Public)](#endpoints-สาธารณะ-public)
- [Endpoints สำหรับผู้ใช้งาน (User)](#endpoints-สำหรับผู้ใช้งาน-user)
- [Endpoints สำหรับผู้ดูแลระบบ (Admin)](#endpoints-สำหรับผู้ดูแลระบบ-admin)
- [รายละเอียดการใช้งาน Authorization](#รายละเอียดการใช้งาน-authorization)
- [เทคโนโลยีที่ใช้](#เทคโนโลยีที่ใช้)
- [Postman Document](#Postman-Document)

---

## Endpoints สำหรับการยืนยันตัวตน (Authentication)

| Method | Endpoint              | คำอธิบาย                                                        |
|--------|-----------------------|------------------------------------------------------------------|
| POST   | `/api/auth`           | ยืนยันตัวตนผู้ใช้งาน และสร้าง JWT Token                        |
| POST   | `/api/registration`   | ลงทะเบียนผู้ใช้งานใหม่ โดยกำหนดบทบาท `user` หากไม่มี admin อยู่ในระบบ |

---

## Endpoints สาธารณะ (Public)

| Method | Endpoint                                | คำอธิบาย                                |
|--------|----------------------------------------|------------------------------------------|
| GET    | `/api/products`                        | เรียกดูสินค้าทั้งหมด                   |
| GET    | `/api/products/{id}`                   | เรียกดูรายละเอียดสินค้าตาม ID          |
| GET    | `/api/image/{id}`                      | ดึงรูปภาพสาธารณะตาม ID                 |
| GET    | `/api/categories`                      | เรียกดูหมวดหมู่สินค้าทั้งหมด           |
| GET    | `/api/categories/{id}/products`        | เรียกดูสินค้าทั้งหมดในหมวดหมู่ตาม ID   |

---

## Endpoints สำหรับผู้ใช้งาน (User)
Endpoints เหล่านี้จำเป็นต้องใช้ Bearer Token และมีบทบาท (Role) เป็น `user`

| Method | Endpoint                                | คำอธิบาย                                            |
|--------|----------------------------------------|----------------------------------------------------|
| GET    | `/api/privateimage/{id}`               | ดึงรูปภาพส่วนตัวตาม ID (ยังไม่เสร็จสมบูรณ์)       |
| GET    | `/api/user/customers/{id}`             | เรียกดูข้อมูลลูกค้าตาม ID                         |
| GET    | `/api/user/orderItems`                 | เรียกดูรายการคำสั่งซื้อทั้งหมดของผู้ใช้งาน         |
| GET    | `/api/user/orders/{id}`                | เรียกดูคำสั่งซื้อตาม ID                           |
| GET    | `/api/user/orders/customers/{id}`      | เรียกดูคำสั่งซื้อของลูกค้าตาม ID                  |
| POST   | `/api/user/customers`                  | สร้างข้อมูลลูกค้าใหม่                              |
| POST   | `/api/user/orders/create`              | สร้างคำสั่งซื้อใหม่ (ข้อมูล User ใน Token ไม่ตรงกับข้อมูล Request จะไม่สามารถสร้างได้)       |
| POST   | `/api/user/orderItems`                 | สร้างรายการคำสั่งซื้อใหม่                          |
| PUT    | `/api/user/customers/{id}`             | แก้ไขข้อมูลลูกค้าตาม ID                           |
| PUT    | `/api/user/orderItems/{id}`            | แก้ไขรายการคำสั่งซื้อตาม ID                       |
| PUT    | `/api/user/orders/{id}`                | แก้ไขคำสั่งซื้อตาม ID                             |
| DELETE | `/api/user/orderItems/{id}`            | ลบรายการคำสั่งซื้อตาม ID                          |
| DELETE | `/api/user/customers/{id}`             | ลบข้อมูลลูกค้าตาม ID                              |

---

## Endpoints สำหรับผู้ดูแลระบบ (Admin)
Endpoints เหล่านี้จำเป็นต้องใช้ Bearer Token และมีบทบาท (Role) เป็น `admin`

| Method | Endpoint                                | คำอธิบาย                                            |
|--------|----------------------------------------|----------------------------------------------------|
| GET    | `/api/admin/orders`                    | เรียกดูคำสั่งซื้อทั้งหมด                           |
| POST   | `/api/admin/categories`                | สร้างหมวดหมู่สินค้าใหม่                            |
| POST   | `/api/admin/products`                  | สร้างสินค้าใหม่                                    |
| PUT    | `/api/admin/categories/{id}`           | แก้ไขหมวดหมู่สินค้าตาม ID                         |
| PUT    | `/api/admin/orders/{id}`               | แก้ไขคำสั่งซื้อตาม ID                             |
| PUT    | `/api/admin/products/{id}`             | แก้ไขสินค้าตาม ID                                 |
| DELETE | `/api/admin/categories/{id}`           | ลบหมวดหมู่สินค้าตาม ID                            |
| DELETE | `/api/admin/image/{imageId}`           | ลบรูปภาพสาธารณะตาม ID                             |
| DELETE | `/api/admin/orders/{id}`               | ลบคำสั่งซื้อตาม ID                                |
| DELETE | `/api/admin/privateimage/{imageId}`    | ลบรูปภาพส่วนตัวตาม ID                             |
| DELETE | `/api/admin/products/{id}`             | ลบสินค้าตาม ID                                    |

---

## รายละเอียดการใช้งาน Authorization

- **Endpoints สาธารณะ:** ไม่จำเป็นต้องยืนยันตัวตน
- **Endpoints สำหรับผู้ใช้งาน:** ต้องใช้ Bearer Token พร้อมบทบาท `user`
- **Endpoints สำหรับผู้ดูแลระบบ:** ต้องใช้ Bearer Token พร้อมบทบาท `admin`

### ตัวอย่างการใส่ Bearer Token ใน Header:
```plaintext
Authorization: Bearer <your_token>
```

---

## เทคโนโลยีที่ใช้
- Backend: Java Spring Boot
- Authentication: JWT-based Bearer Token
- ORM : Hibernate JPA
- Database: MySQL

---

## Postman Document
- เอกสารเพิ่มเติมของฐานข้อมูล เอกสาร API Request -> Response Body
- [Link Postman Document](https://documenter.getpostman.com/view/37320005/2sAYQZGByc)
- ใช้ Postbot ในการ Generate Document
